<!DOCTYPE html>
<html lang="ne">
<head>
<meta charset="UTF-8">
<title>Existing Status ‚Äì FarmerBase BP Engine</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
/* ===== BASE ===== */
body{
  margin:0;
  font-family:system-ui, -apple-system, sans-serif;
  background:#f5f7fa;
  color:#222;
}
.container{
  max-width:920px;
  margin:auto;
  padding:20px;
}
a{text-decoration:none;color:inherit}

/* ===== HEADER ===== */
header{
  background:#1b5e20;
  color:#fff;
  padding:10px 16px;
}
header .title{
  font-size:18px;
  font-weight:600;
}
header .sub{
  font-size:12px;
  opacity:.9;
}

/* ===== CARD ===== */
.card{
  background:#fff;
  padding:20px;
  border-radius:8px;
  margin-bottom:20px;
}
.card h2{
  margin-top:0;
  color:#1b5e20;
}

/* ===== TOPIC BLOCK ===== */
.topic{
  border:1px solid #ddd;
  border-radius:6px;
  padding:12px;
  margin-bottom:12px;
}
.topic h3{
  margin:0 0 6px 0;
  font-size:16px;
}
.topic p{
  margin:0;
  white-space:pre-wrap;
  line-height:1.5;
}

/* ===== ACTIONS ===== */
.actions{
  margin-top:8px;
}
.actions button{
  margin-right:6px;
  border:none;
  background:#607d8b;
  color:#fff;
  padding:4px 10px;
  border-radius:14px;
  cursor:pointer;
  font-size:12px;
}
.actions button.delete{
  background:#c62828;
}

/* ===== FORM ===== */
label{
  display:block;
  margin-top:10px;
  font-size:14px;
}
input, textarea{
  width:100%;
  padding:10px;
  margin-top:4px;
  font-size:14px;
  border-radius:6px;
  border:1px solid #ccc;
}
textarea{resize:vertical}

/* ===== NAV ===== */
.nav{
  display:flex;
  justify-content:space-between;
  margin-top:20px;
}
.nav button{
  padding:10px 16px;
  border:none;
  border-radius:20px;
  background:#1b5e20;
  color:#fff;
  cursor:pointer;
}
.nav button.secondary{
  background:#607d8b;
}

/* ===== FOOTER ===== */
footer{
  text-align:center;
  padding:14px;
  font-size:13px;
  color:#555;
  border-top:1px solid #ddd;
  margin-top:30px;
}
</style>
</head>

<body>

<header>
  <div class="title" id="hdrBiz"></div>
  <div class="sub" id="hdrProj"></div>
</header>

<div class="container">

  <div class="card">
    <h2>‡§π‡§æ‡§≤‡§ï‡•ã ‡§Ö‡§µ‡§∏‡•ç‡§•‡§æ / ‡§™‡•Ç‡§∞‡•ç‡§µ‡§æ‡§ß‡§æ‡§∞ (Existing Status)</h2>
    <p>
      ‡§µ‡•ç‡§Ø‡§µ‡§∏‡§æ‡§Ø‡§∏‡§Å‡§ó ‡§∏‡§Æ‡•ç‡§¨‡§®‡•ç‡§ß‡§ø‡§§ ‡§π‡§æ‡§≤ ‡§â‡§™‡§≤‡§¨‡•ç‡§ß ‡§Ö‡§µ‡§∏‡•ç‡§•‡§æ,
      ‡§™‡•Ç‡§∞‡•ç‡§µ‡§æ‡§ß‡§æ‡§∞, ‡§™‡§π‡•Å‡§Å‡§ö ‡§∞ ‡§§‡§Ø‡§æ‡§∞‡•Ä‡§ï‡•ã ‡§µ‡§ø‡§µ‡§∞‡§£ ‡§Ø‡§π‡§æ‡§Å ‡§≤‡•á‡§ñ‡•ç‡§®‡•Å‡§π‡•ã‡§∏‡•ç‡•§
    </p>
  </div>

  <!-- ADD / EDIT FORM -->
  <div class="card">
    <h3 id="formTitle">‡§®‡§Ø‡§æ‡§Å ‡§∂‡•Ä‡§∞‡•ç‡§∑‡§ï ‡§•‡§™‡•ç‡§®‡•Å‡§π‡•ã‡§∏‡•ç</h3>

    <label>‡§∂‡•Ä‡§∞‡•ç‡§∑‡§ï</label>
    <input id="topicTitle" placeholder="‡§ú‡§∏‡•ç‡§§‡•à: ‡§∏‡§°‡§ï ‡§™‡§π‡•Å‡§Å‡§ö">

    <label>‡§µ‡§ø‡§µ‡§∞‡§£</label>
    <textarea id="topicContent" rows="4"
      placeholder="‡§∏‡§°‡§ï, ‡§¨‡§ø‡§ú‡•Å‡§≤‡•Ä, ‡§™‡§æ‡§®‡•Ä, ‡§¨‡§ú‡§æ‡§∞, ‡§ú‡§®‡§∂‡§ï‡•ç‡§§‡§ø ‡§Ü‡§¶‡§ø ‡§¨‡§æ‡§∞‡•á ‡§µ‡§ø‡§µ‡§∞‡§£ ‡§≤‡•á‡§ñ‡•ç‡§®‡•Å‡§π‡•ã‡§∏‡•ç"></textarea>

    <button style="margin-top:12px" onclick="saveTopic()">
      üíæ ‡§∏‡•Å‡§∞‡§ï‡•ç‡§∑‡§ø‡§§ ‡§ó‡§∞‡•ç‡§®‡•Å‡§π‡•ã‡§∏‡•ç
    </button>
  </div>

  <!-- TOPIC LIST -->
  <div class="card">
    <h3>‡§•‡§™‡§ø‡§è‡§ï‡§æ ‡§µ‡§ø‡§µ‡§∞‡§£</h3>
    <div id="topicList"></div>
  </div>

  <!-- NAV -->
  <div class="nav">
    <button class="secondary" onclick="goBack()">‚¨ÖÔ∏è Short Info</button>
    <button onclick="goNext()">Next ‚û°Ô∏è</button>
  </div>

</div>

<footer>
  FarmerBase BP Engine<br>
  Concept Development By:
  <b>Prem Prasad Paudel</b>
</footer>

<script>
/* ===== KEYS ===== */
const META_KEY = "fb_meta";
const KEY = "fb_existing_status";

/* ===== HEADER META ===== */
const meta = JSON.parse(localStorage.getItem(META_KEY)||"{}");
hdrBiz.textContent = meta.business || "‡§µ‡•ç‡§Ø‡§µ‡§∏‡§æ‡§Ø";
hdrProj.textContent = meta.project || "‡§™‡§∞‡§ø‡§Ø‡•ã‡§ú‡§®‡§æ";

/* ===== DATA ===== */
let list = JSON.parse(localStorage.getItem(KEY)||"[]");
let editIndex = null;

/* ===== RENDER ===== */
function render(){
  topicList.innerHTML="";
  if(list.length===0){
    topicList.innerHTML="<i>‡§Ö‡§π‡§ø‡§≤‡•á‡§∏‡§Æ‡•ç‡§Æ ‡§ï‡•á‡§π‡•Ä ‡§•‡§™‡§ø‡§è‡§ï‡•ã ‡§õ‡•à‡§®‡•§</i>";
    return;
  }

  list.forEach((t,i)=>{
    const div=document.createElement("div");
    div.className="topic";
    div.innerHTML=`
      <h3>${t.title}</h3>
      <p>${t.content}</p>
      <div class="actions">
        <button onclick="editTopic(${i})">‚úèÔ∏è ‡§∏‡§ö‡•ç‡§Ø‡§æ‡§â‡§®‡•á</button>
        <button class="delete" onclick="deleteTopic(${i})">üóë ‡§π‡§ü‡§æ‡§â‡§®‡•á</button>
      </div>
    `;
    topicList.appendChild(div);
  });
}
render();

/* ===== SAVE / EDIT ===== */
function saveTopic(){
  if(!topicTitle.value || !topicContent.value){
    alert("‡§∂‡•Ä‡§∞‡•ç‡§∑‡§ï ‡§∞ ‡§µ‡§ø‡§µ‡§∞‡§£ ‡§Ö‡§®‡§ø‡§µ‡§æ‡§∞‡•ç‡§Ø ‡§õ");
    return;
  }

  if(editIndex===null){
    list.push({
      title:topicTitle.value,
      content:topicContent.value
    });
  }else{
    list[editIndex]={
      title:topicTitle.value,
      content:topicContent.value
    };
    editIndex=null;
    formTitle.textContent="‡§®‡§Ø‡§æ‡§Å ‡§∂‡•Ä‡§∞‡•ç‡§∑‡§ï ‡§•‡§™‡•ç‡§®‡•Å‡§π‡•ã‡§∏‡•ç";
  }

  topicTitle.value="";
  topicContent.value="";
  localStorage.setItem(KEY, JSON.stringify(list));
  render();
}

function editTopic(i){
  topicTitle.value=list[i].title;
  topicContent.value=list[i].content;
  editIndex=i;
  formTitle.textContent="‡§∂‡•Ä‡§∞‡•ç‡§∑‡§ï ‡§∏‡§ö‡•ç‡§Ø‡§æ‡§â‡§®‡•Å‡§π‡•ã‡§∏‡•ç";
}

function deleteTopic(i){
  if(confirm("‡§Ø‡•ã ‡§µ‡§ø‡§µ‡§∞‡§£ ‡§π‡§ü‡§æ‡§â‡§®‡•á?")){
    list.splice(i,1);
    localStorage.setItem(KEY, JSON.stringify(list));
    render();
  }
}

/* ===== NAV ===== */
function goBack(){
  location.href="short-info.html";
}
function goNext(){
  location.href="business-detail.html";
}
</script>

</body>
</html>
