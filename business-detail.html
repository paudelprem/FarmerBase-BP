<!DOCTYPE html>
<html lang="ne">
<head>
<meta charset="UTF-8">
<title>Business Detail</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{margin:0;font-family:system-ui;background:#f5f7fa}
header{
  position:sticky;top:0;z-index:1000;
  background:#1b5e20;color:#fff;
  padding:8px 16px;
  display:flex;justify-content:space-between;align-items:center
}
footer{
  position:fixed;bottom:0;left:0;right:0;
  background:#f1f8f4;border-top:1px solid #ccc;
  padding:6px 12px;
  display:flex;justify-content:space-between
}
.container{
  max-width:1100px;margin:auto;padding:16px;
  padding-bottom:70px
}
.card{
  background:#fff;padding:16px;border-radius:8px;
  margin-bottom:16px
}
h2{margin:0 0 10px;color:#1b5e20}
.small{font-size:13px;color:#555}

input,textarea{
  width:100%;padding:8px;
  border:1px solid #ccc;border-radius:6px
}
button{
  padding:6px 12px;border:none;border-radius:6px;
  background:#1b5e20;color:#fff;cursor:pointer
}
button.ghost{background:#e8f5e9;color:#1b5e20}
button.danger{background:#c62828}

.topic{
  border:1px solid #ddd;border-radius:6px;
  padding:12px;margin-top:10px
}
.topic-head{
  display:flex;justify-content:space-between;align-items:center
}
</style>
</head>

<body>

<!-- ===== HEADER ===== -->
<header>
  <div>FarmerBase BP Engine</div>
  <div id="hdrBiz"></div>
</header>

<div class="container">

<div class="card">
  <h2>üìå ‡§µ‡•ç‡§Ø‡§µ‡§∏‡§æ‡§Ø ‡§µ‡§ø‡§µ‡§∞‡§£ (Business Detail)</h2>
  <p class="small">
    ‡§Ø‡§∏ ‡§ñ‡§£‡•ç‡§°‡§Æ‡§æ ‡§™‡•ç‡§∞‡§∏‡•ç‡§§‡§æ‡§µ‡§®‡§æ‡§∏‡§Å‡§ó ‡§∏‡§Æ‡•ç‡§¨‡§®‡•ç‡§ß‡§ø‡§§
    ‡§™‡•É‡§∑‡•ç‡§†‡§≠‡•Ç‡§Æ‡§ø, ‡§¨‡§ú‡§æ‡§∞ ‡§Ö‡§µ‡§∏‡•ç‡§•‡§æ, ‡§≤‡§ï‡•ç‡§∑‡•ç‡§Ø, ‡§∞‡§£‡§®‡•Ä‡§§‡§ø,
    ‡§§‡§•‡§æ ‡§µ‡•ç‡§Ø‡§µ‡§∏‡§æ‡§Ø ‡§∏‡§û‡•ç‡§ö‡§æ‡§≤‡§®‡§ï‡•ã ‡§∏‡•ç‡§™‡§∑‡•ç‡§ü ‡§¶‡§ø‡§∂‡§æ
    Paragraph ‡§∂‡•à‡§≤‡•Ä‡§Æ‡§æ ‡§â‡§≤‡•ç‡§≤‡•á‡§ñ ‡§ó‡§∞‡§ø‡§®‡•ç‡§õ‡•§
  </p>
</div>

<!-- ===== ADD TOPIC ===== -->
<div class="card">
  <h2>‚ûï ‡§®‡§Ø‡§æ‡§Å ‡§µ‡§ø‡§∑‡§Ø ‡§•‡§™‡•ç‡§®‡•Å‡§π‡•ã‡§∏‡•ç</h2>
  <input id="topicTitle" placeholder="‡§µ‡§ø‡§∑‡§Ø (‡§ú‡§∏‡•ç‡§§‡•à: ‡§¨‡§ú‡§æ‡§∞‡§ï‡•ã ‡§π‡§æ‡§≤‡§ï‡•ã ‡§Ö‡§µ‡§∏‡•ç‡§•‡§æ)">
  <br><br>
  <textarea id="topicContent" rows="4"
    placeholder="‡§Ø‡§∏ ‡§µ‡§ø‡§∑‡§Ø‡§∏‡§Å‡§ó ‡§∏‡§Æ‡•ç‡§¨‡§®‡•ç‡§ß‡§ø‡§§ ‡§µ‡§ø‡§µ‡§∞‡§£ ‡§≤‡•á‡§ñ‡•ç‡§®‡•Å‡§π‡•ã‡§∏‡•ç..."></textarea>
  <br><br>
  <button type="button" onclick="addTopic()">‡§•‡§™‡•ç‡§®‡•Å‡§π‡•ã‡§∏‡•ç</button>
</div>

<!-- ===== TOPIC LIST ===== -->
<div id="topicList"></div>

</div>

<!-- ===== FOOTER NAV ===== -->
<footer>
  <button type="button" onclick="goPrev()">‚¨ÖÔ∏è</button>
  <button type="button" onclick="goNext()">‚û°Ô∏è</button>
</footer>

<script>
/* ===== HEADER IDENTITY ===== */
const biz = JSON.parse(localStorage.getItem("fb_business")||"{}");
document.getElementById("hdrBiz").textContent =
  biz.projectName || biz.businessName || "";

/* ===== DATA ===== */
const KEY="fb_business_detail";
let topics = JSON.parse(localStorage.getItem(KEY)) || [];

function save(){
  localStorage.setItem(KEY, JSON.stringify(topics));
}

/* ===== ADD ===== */
function addTopic(){
  const t = topicTitle.value.trim();
  const c = topicContent.value.trim();
  if(!t || !c){ alert("‡§µ‡§ø‡§∑‡§Ø ‡§∞ ‡§µ‡§ø‡§µ‡§∞‡§£ ‡§¶‡•Å‡§µ‡•à ‡§≤‡•á‡§ñ‡•ç‡§®‡•Å‡§π‡•ã‡§∏‡•ç"); return; }
  topics.unshift({title:t,content:c});
  topicTitle.value=""; topicContent.value="";
  save(); render();
}

/* ===== EDIT / DELETE ===== */
function editTopic(i){
  const nt = prompt("‡§µ‡§ø‡§∑‡§Ø:", topics[i].title);
  if(!nt) return;
  const nc = prompt("‡§µ‡§ø‡§µ‡§∞‡§£:", topics[i].content);
  if(!nc) return;
  topics[i]={title:nt,content:nc};
  save(); render();
}
function delTopic(i){
  if(!confirm("‡§π‡§ü‡§æ‡§â‡§®‡•á?")) return;
  topics.splice(i,1);
  save(); render();
}

/* ===== RENDER ===== */
function render(){
  topicList.innerHTML="";
  topics.forEach((t,i)=>{
    const d=document.createElement("div");
    d.className="topic";
    d.innerHTML=`
      <div class="topic-head">
        <b>${t.title}</b>
        <div>
          <button class="ghost" onclick="editTopic(${i})">‚úèÔ∏è</button>
          <button class="danger" onclick="delTopic(${i})">‚úñ</button>
        </div>
      </div>
      <p class="small" style="margin-top:8px">${t.content}</p>
    `;
    topicList.appendChild(d);
  });
}
render();

/* ===== NAV ===== */
function goPrev(){ location.href="existing-status.html"; }
function goNext(){ location.href="production.html"; }
</script>

</body>
</html>
